<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FitHabit — Perfil</title>
    <script>
      (function () {
        try {
          var saved = localStorage.getItem('fithabit-theme');
          if (saved === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
          } else if (saved === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
          }
        } catch (e) {
          // se não conseguir ler o localStorage, não faz nada
        }
      })();
    </script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />
    <link rel="stylesheet" href="assets/css/materialize.custom.css" />
  </head>
  <body class="page-perfil">
    <header class="navbar-fixed">
      <nav class="white" role="navigation" aria-label="Principal">
        <div class="nav-wrapper container">
          <div class="topbar desktop-navbar">
            <div class="topbar-left">
              <a href="index.html" class="brand-logo">
                <img
                  id="logo-fithabit"
                  src="assets/img/logo-fithabit.png"
                  alt="FitHabit"
                  class="navbar-logo-img topbar-logo"
                  loading="eager"
                >
              </a>
              <div class="desktop-nav-links hide-on-small-and-down">
                <a href="index.html" class="fh-nav-link">Dashboard</a>
                <a href="habitos.html" class="fh-nav-link">Hábitos</a>
                <a href="relatorios.html" class="fh-nav-link">Relatórios</a>
              </div>
            </div>
            <div class="topbar-center">
              <h1 class="topbar-title">Perfil</h1>
            </div>
            <div class="topbar-right">
              <div class="navbar-theme-toggle">
                <div class="theme-toggle-wrapper">
                  <label class="switch theme-toggle">
                    <input
                      type="checkbox"
                      class="checkbox"
                      id="themeToggleSwitch"
                      aria-label="Alternar tema"
                    />
                    <div class="slider"></div>
                  </label>
                </div>
              </div>
              <a
                href="perfil.html"
                class="navbar-avatar-link hide-on-small-and-down"
                aria-label="Ir para o perfil"
              >
                <div class="navbar-avatar" data-profile-avatar>
                  <i class="material-icons-round profile-avatar-icon">account_circle</i>
                </div>
              </a>
            </div>
          </div>
        </div>
      </nav>
      
    </header>

    <main class="page-content">
      <div class="container profile-container">
        <div class="row">
          <div class="col s12">
            <section class="profile-card app-glass-card center-align">
              <div class="profile-avatar-lg" data-profile-avatar>
                <i class="material-icons-round profile-avatar-icon">account_circle</i>
              </div>
              <h1 style="margin:.75rem 0 0 0;" data-profile-name>Sofia Oliveira</h1>
              <p class="text-sub" style="margin:.25rem 0; color:#16a34a;" data-profile-bio>
                Entusiasta de fitness e bem-estar
              </p>
              <div style="margin-top:1.25rem;">
                <a href="#editProfileModal" class="btn btn-primary modal-trigger">
                  <i class="material-icons-round left">edit</i>Editar Perfil
                </a>
              </div>
            </section>
          </div>
        </div>
      </div>

      <!-- Modal de edição de perfil -->
      <div id="editProfileModal" class="modal">
        <div class="modal-content">
          <div class="section-header section-header--modal">
            <div class="section-header-accent" aria-hidden="true"></div>
            <div class="section-header-content">
              <h5 style="margin:0;">Editar perfil</h5>
            </div>
          </div>
          <form id="editProfileForm">
            <div class="input-field">
              <input id="profileName" type="text" required>
              <label for="profileName">Nome completo</label>
            </div>
            <div class="input-field">
              <input id="profileBio" type="text" required>
              <label for="profileBio">Descrição de perfil</label>
            </div>
            <!-- Campos de endereço (usados com API ViaCEP) -->
            <div class="input-field">
              <input id="profileCep" type="text" maxlength="9" placeholder="00000-000">
              <label for="profileCep">CEP</label>
              <div id="cep-error" class="cep-error-message is-hidden" aria-live="polite"></div>
            </div>
            <div class="input-field">
              <input id="profileLogradouro" type="text">
              <label for="profileLogradouro">Logradouro</label>
            </div>
            <div class="input-field">
              <input id="profileBairro" type="text">
              <label for="profileBairro">Bairro</label>
            </div>
            <div class="input-field">
              <input id="profileCidade" type="text">
              <label for="profileCidade">Cidade</label>
            </div>
            <div class="input-field">
              <input id="profileUf" type="text" maxlength="2">
              <label for="profileUf">UF</label>
            </div>
            <div class="input-field">
              <button type="button" id="btnBuscarCep" class="btn btn-secondary">
                Buscar CEP
              </button>
            </div>
            <div class="file-field input-field">
              <div class="btn btn-primary">
                <span>Selecionar foto</span>
                <input id="profilePhotoInput" type="file" accept="image/*">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text" placeholder="Escolha uma nova foto de perfil (opcional)">
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-close btn-flat">Cancelar</a>
          <button type="submit" form="editProfileForm" class="btn btn-primary">Salvar alterações</button>
        </div>
      </div>

      <div class="section" aria-live="polite"></div>
    </main>

    <!-- Bottom Navigation (mobile only) -->
    <nav class="mobile-bottom-nav hide-on-med-and-up">
      <div class="container mb-wrap">
        <a href="index.html"><i class="material-icons">home</i><span>Dashboard</span></a>
        <a href="habitos.html"><i class="material-icons">list</i><span>Hábitos</span></a>
        <a href="relatorios.html"><i class="material-icons">calendar_today</i><span>Relatórios</span></a>
        <a href="perfil.html" class="active"><i class="material-icons">person</i><span>Perfil</span></a>
      </div>
    </nav>
    

    <!-- jQuery + plugin de máscara (para CEP) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

    <!-- Materialize JS, tema, perfil e scripts complementares -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/profile.js"></script>
    <script src="assets/js/profile-jquery.js"></script>
  </body>
</html>


